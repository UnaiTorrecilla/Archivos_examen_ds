load('muestra40.RData')
View(muestra40)
muestra40 <- muestra40 %>%
rename('nif' = 'var1',
'nombre' = 'var2',
'genero' = 'var3')
library(dplyr)
muestra40 <- muestra40 %>%
rename('nif' = 'var1',
'nombre' = 'var2',
'genero' = 'var3')
grepl('[:alpha:]{8}', muestra40$nif)
grepl('[:digit:]{8}', muestra40$nif)
grepl('[:digit:]{8}[:alpha:]?', muestra40$nif)
formato_correcto <- grepl('[:digit:]{8}[:alpha:]?', muestra40$nif)
which(formato_correcto)
which(formato_correcto == T)
formato_correcto <- grepl('[:digit:]{7,}[:alpha:]?', muestra40$nif)
formato_correcto
formato_correcto <- grepl('[:alnum:]{7,}[:alpha:]?', muestra40$nif)
formato_correcto
formato_correcto <- grepl('[[:digit:]]{7,}[[:alpha:]]?', muestra40$nif)
formato_correcto
formato_correcto <- grepl('[[:digit:]]{8,}[[:alpha:]]?', muestra40$nif)
formato_correcto
formato_correcto1 <- which(formato_correcto == T)
filas_buenas <- muestra40[formato_correcto1,]
View(filas_buenas)
formato_correcto <- grepl('[[:digit:]]{8}[[:alpha:]]?', muestra40$nif)
formato_correcto1 <- which(formato_correcto == T)
filas_buenas <- muestra40[formato_correcto1,]#En este fichero tenemos los NIF que tienen primero
formato_nacional <- grepl('[[:digit:]]{8}[[:alpha:]]{1}', muestra40$nif)
formato_nacional1 <- which(formato_nacional == T)
filas_formato_nacional <- muestra40[formato_nacional1, ]
alguna_limpieza <- grepl('[[:digit:]]{0,7}')
alguna_limpieza <- grepl('[[:digit:]]{0,7}', muestra40$nif)
alguna_limpieza1 <- which(alguna_limpieza == T)
mdatos1 <- muestra40[alguna_limpieza1 == T, ]
View(mdatos1)
alguna_limpieza <- grepl('[[:digit:]]{0,7}[[:alpha:]]*', muestra40$nif)
alguna_limpieza1 <- which(alguna_limpieza == T)
mdatos1 <- muestra40[alguna_limpieza1 == T, ]
alguna_limpieza1
mdatos1 <- muestra40[alguna_limpieza1 == T, ]
load('muestra40.RData')
library(dplyr)
load('muestra40.RData')
library(dplyr)
muestra40 <- muestra40 %>%
rename('nif' = 'var1',
'nombre' = 'var2',
'genero' = 'var3')
alguna_limpieza <- grepl('[[:digit:]]{0,7}[[:alpha:]]*', muestra40$nif)
alguna_limpieza1 <- which(alguna_limpieza == T)
alguna_limpieza1
mdatos1 <- muestra40[alguna_limpieza1 == T, ]
mdatos1 <- muestra40[alguna_limpieza1, ]
alguna_limpieza <- grepl('[[:digit:]]{0,7}', muestra40$nif)
alguna_limpieza1 <- which(alguna_limpieza == T)
alguna_limpieza1
mdatos1 <- muestra40[alguna_limpieza1, ]
alguna_limpieza <- grepl('[[:digit:]]{1}', muestra40$nif)
alguna_limpieza1 <- which(alguna_limpieza == T)
alguna_limpieza1
mdatos1 <- muestra40[alguna_limpieza1, ]
alguna_limpieza <- grepl('[[:digit:]]?', muestra40$nif)
alguna_limpieza1 <- which(alguna_limpieza == T)
alguna_limpieza1
mdatos1 <- muestra40[alguna_limpieza1, ]
str(muestra40)
unique(muestra40$genero)
#Cambio a NA todos los géneros extraños
muestra40[muestra40$genero %in% c('', 'X', 'E')] <- NA
#Cambio a NA todos los géneros extraños
muestra40[muestra40$genero %in% c('', 'X', 'E'),] <- NA
unique(muestra40$genero)
load('muestra40.RData')
muestra40 <- muestra40 %>%
rename('nif' = 'var1',
'nombre' = 'var2',
'genero' = 'var3')
#Cambio a NA todos los géneros extraños
muestra40[muestra40$genero %in% c('', 'X', 'E'), 3] <- NA
library(stringr)
muestra40$nombre <- toupper(muestra40$nombre)
n_distinct(muestra40$nombre)
frecuencias_nombres <- muestra40 %>%
group_by(nombre, genero) %>%
summarize(frecuencia = n())
View(frecuencias_nombres)
n_distinct(muestra40$nombre)
prueba <- muestra40 %>%
left_join(frecuencias_nombres, by = 'nombre')
View(prueba)
frecuencias_nombres <- muestra40 %>%
group_by(nombre, genero) %>%
summarize(frecuencia_M = count(.$genero == 'M'))
frecuencias_nombres <- muestra40 %>%
group_by(nombre, genero) %>%
summarize(frecuencia_M = count(.$genero == 'M',))
frecuencias_nombres <- muestra40 %>%
group_by(nombre, genero) %>%
summarize(frecuencia_M = sum(.$genero == 'M',))
frecuencias_nombres <- muestra40 %>%
group_by(nombre, genero) %>%
summarize(frecuencia_M = sum(.[.$genero == 'M',]))
frecuencias_nombres <- muestra40 %>%
group_by(nombre, genero) %>%
summarize(frecuencia_M = count(.[.$genero == 'M',]))
